<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ov_msckf::StateHelper class | OpenVINS</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600&amp;subset=latin-ext" />
  <link rel="stylesheet" href="m-udel+documentation.compiled.css" />
  <link rel="stylesheet" href="custom.css" />
  <link rel="icon" href="favicon-light.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#2f73a3" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">OpenVINS</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="namespaceov__core.html">ov_core</a></li>
            <li><a href="namespaceov__type.html">ov_type</a></li>
            <li><a href="namespaceov__msckf.html">ov_msckf</a></li>
            <li><a href="namespaceov__eval.html">ov_eval</a></li>
            <li><a href="annotated.html">Classes</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="7">
            <li><a href="https://github.com/rpng/open_vins/">GitHub</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespaceov__msckf.html">ov_msckf</a>::<wbr/></span>StateHelper <span class="m-thin">class</span>
        </h1>
        <p>Helper which manipulates the <a href="classov__msckf_1_1State.html" class="m-doc">State</a> and its covariance.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#pub-static-methods">Public static functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>In general, this class has all the core logic for an Extended Kalman Filter (EKF)-based system. This has all functions that change the covariance along with addition and removing elements from the state. All functions here are static, and thus are self-contained so that in the future multiple states could be tracked and updated. We recommend you look directly at the code for this class for clarity on what exactly we are doing in each and the matching documentation pages.</p>
        <section id="pub-static-methods">
          <h2><a href="#pub-static-methods">Public static functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a4d46ec9685f0b9b2727295f501fcf49a" class="m-doc">EKFPropagation</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; order_NEW,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; order_OLD,
              const Eigen::MatrixXd&amp; Phi,
              const Eigen::MatrixXd&amp; Q)</span>
            </dt>
            <dd>Performs EKF propagation of the state covariance.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a0ce1a0cb854bf687285500e55b8260f7" class="m-doc">EKFUpdate</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; H_order,
              const Eigen::MatrixXd&amp; H,
              const Eigen::VectorXd&amp; res,
              const Eigen::MatrixXd&amp; R)</span>
            </dt>
            <dd>Performs EKF update of the state (see <a href="update.html#linear-meas" class="m-doc">Linear Measurement Update</a> page)</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a2552a9b41e3287fd9f0638656f52c279" class="m-doc">fix_4dof_gauge_freedoms</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const Eigen::Vector4d&amp; q_GtoI)</span>
            </dt>
            <dd>This will fix the initial covariance matrix gauge freedoms (4dof, yaw and position).</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static auto <a href="#ae49342fcfb15f992f8742b904ff1ab3c" class="m-doc">get_marginal_covariance</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; small_variables) -&gt; Eigen::MatrixXd</span>
            </dt>
            <dd>For a given set of variables, this will this will calculate a smaller covariance.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static auto <a href="#a2ac98543816e664cd85e4fa61bd165b7" class="m-doc">get_full_covariance</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state) -&gt; Eigen::MatrixXd</span>
            </dt>
            <dd>This gets the full covariance matrix.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a8ea2f61ff85d1404e561b3e2a971d3a8" class="m-doc">marginalize</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt; marg)</span>
            </dt>
            <dd>Marginalizes a variable, properly modifying the ordering/covariances in the state.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static auto <a href="#a85147edb95990cc260c66a6746033421" class="m-doc">clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt; variable_to_clone) -&gt; std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;</span>
            </dt>
            <dd>Clones &quot;variable to clone&quot; and places it at end of covariance.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static auto <a href="#ac3e10c58e618a813a9eee2fd347f34aa" class="m-doc">initialize</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt; new_variable,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; H_order,
              Eigen::MatrixXd&amp; H_R,
              Eigen::MatrixXd&amp; H_L,
              Eigen::MatrixXd&amp; R,
              Eigen::VectorXd&amp; res,
              double chi_2_mult) -&gt; bool</span>
            </dt>
            <dd>Initializes new variable into covariance.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a645d15e6ea6b4c9e36341561a62a0c24" class="m-doc">initialize_invertible</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt; new_variable,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; H_order,
              const Eigen::MatrixXd&amp; H_R,
              const Eigen::MatrixXd&amp; H_L,
              const Eigen::MatrixXd&amp; R,
              const Eigen::VectorXd&amp; res)</span>
            </dt>
            <dd>Initializes new variable into covariance (H_L must be invertible)</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#ade3a86a89f15cc6e03a6430fd1dee694" class="m-doc">augment_clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              Eigen::Matrix&lt;double, 3, 1&gt; last_w)</span>
            </dt>
            <dd>Augment the state with a stochastic copy of the current IMU pose.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#ad28c48f76c61a6497b2f860510493e13" class="m-doc">marginalize_old_clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state)</span>
            </dt>
            <dd>Remove the oldest clone, if we have more then the max clone count!!</dd>
            <dt>
              <span class="m-doc-wrap-bumper">static void <a href="#a98fd90e4994d2b17089648fd79bc57b5" class="m-doc">marginalize_slam</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state)</span>
            </dt>
            <dd>Marginalize bad SLAM features.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="a4d46ec9685f0b9b2727295f501fcf49a"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a4d46ec9685f0b9b2727295f501fcf49a" class="m-doc-self">EKFPropagation</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; order_NEW,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; order_OLD,
              const Eigen::MatrixXd&amp; Phi,
              const Eigen::MatrixXd&amp; Q)</span></span>
            </h3>
            <p>Performs EKF propagation of the state covariance.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>order_NEW</td>
                  <td>Contiguous variables that have evolved according to this state transition</td>
                </tr>
                <tr>
                  <td>order_OLD</td>
                  <td>Variable ordering used in the state transition</td>
                </tr>
                <tr>
                  <td>Phi</td>
                  <td><a href="classov__msckf_1_1State.html" class="m-doc">State</a> transition matrix (size order_NEW by size order_OLD)</td>
                </tr>
                <tr>
                  <td>Q</td>
                  <td>Additive state propagation noise matrix (size order_NEW by size order_NEW)</td>
                </tr>
              </tbody>
            </table>
<p>The mean of the state should already have been propagated, thus just moves the covariance forward in time. The new states that we are propagating the old covariance into, should be <strong>contiguous</strong> in memory. The user only needs to specify the sub-variables that this block is a function of.</p><div class="m-math"><svg style="width: 15.679em; height: 4.483em;" viewBox="119.012 -43.1882 150.519 43.039">
<title>
\[ \tilde{\mathbf{x}}&#x27; = \begin{bmatrix} \boldsymbol\Phi_1 &amp; \boldsymbol\Phi_2 &amp; \boldsymbol\Phi_3 \end{bmatrix} \begin{bmatrix} \tilde{\mathbf{x}}_1 \\ \tilde{\mathbf{x}}_2 \\ \tilde{\mathbf{x}}_3 \end{bmatrix} + \mathbf{n} \]
</title>
<defs>
<path d='M7.12528 -7.68717V-8.20125C6.62316 -8.17733 5.36787 -8.17733 4.80598 -8.17733S2.97684 -8.17733 2.47472 -8.20125V-7.68717H4.06476V-6.43188C1.67372 -6.22864 0.74122 -5.11681 0.74122 -4.10062C0.74122 -3.07248 1.68568 -1.9726 4.06476 -1.76936V-0.514072H2.47472V0C2.97684 -0.0239103 4.23213 -0.0239103 4.79402 -0.0239103S6.62316 -0.0239103 7.12528 0V-0.514072H5.53524V-1.76936C8.3208 -1.9726 8.95442 -3.31158 8.95442 -4.10062S8.3208 -6.22864 5.53524 -6.43188V-7.68717H7.12528ZM4.06476 -2.1878C2.57036 -2.39103 2.36712 -3.26376 2.36712 -4.10062S2.55841 -5.81021 4.06476 -6.01345V-2.1878ZM5.53524 -6.0254C7.0655 -5.84608 7.32852 -5.03313 7.32852 -4.10062S7.0655 -2.35517 5.53524 -2.17584V-6.0254Z' id='eq1-g0-8'/>
<path d='M6.34819 -3.65828C6.34819 -4.79402 5.85803 -5.37983 4.54296 -5.37983C3.68219 -5.37983 2.94097 -4.96139 2.5345 -4.06476H2.52254V-5.37983L0.502117 -5.28418V-4.77011C1.24334 -4.77011 1.32702 -4.77011 1.32702 -4.30386V-0.514072H0.502117V0C0.777086 -0.0239103 1.63786 -0.0239103 1.9726 -0.0239103S3.18007 -0.0239103 3.45504 0V-0.514072H2.63014V-3.06052C2.63014 -4.35168 3.58655 -4.98531 4.35168 -4.98531C4.79402 -4.98531 5.04508 -4.69838 5.04508 -3.78979V-0.514072H4.22017V0C4.49514 -0.0239103 5.35592 -0.0239103 5.69066 -0.0239103S6.89813 -0.0239103 7.1731 0V-0.514072H6.34819V-3.65828Z' id='eq1-g0-110'/>
<path d='M4.02889 -2.95293L5.41569 -4.54296C5.5472 -4.69838 5.65479 -4.79402 6.64707 -4.79402V-5.30809C5.97758 -5.28418 5.95367 -5.28418 5.5472 -5.28418C5.2005 -5.28418 4.68643 -5.28418 4.35168 -5.30809V-4.79402C4.57883 -4.79402 4.82989 -4.73425 4.82989 -4.65056C4.82989 -4.62665 4.77011 -4.54296 4.7462 -4.51905L3.7061 -3.34745L2.52254 -4.79402H3.02466V-5.30809C2.74969 -5.28418 1.93674 -5.28418 1.61395 -5.28418C1.25529 -5.28418 0.609714 -5.28418 0.274969 -5.30809V-4.79402H1.12379L2.98879 -2.52254L1.43462 -0.765131C1.29116 -0.597758 1.20747 -0.514072 0.215193 -0.514072V0C0.932503 -0.0239103 0.956413 -0.0239103 1.32702 -0.0239103C1.67372 -0.0239103 2.17584 -0.0239103 2.51059 0V-0.514072C2.28344 -0.514072 2.03238 -0.573848 2.03238 -0.657534C2.03238 -0.669489 2.03238 -0.681445 2.11606 -0.777086L3.31158 -2.12802L4.63861 -0.514072H4.13649V0C4.42341 -0.0239103 5.22441 -0.0239103 5.55915 -0.0239103C5.91781 -0.0239103 6.55143 -0.0239103 6.88618 0V-0.514072H6.04932L4.02889 -2.95293Z' id='eq1-g0-120'/>
<path d='M4.77011 -2.76164H8.06974C8.23711 -2.76164 8.4523 -2.76164 8.4523 -2.97684C8.4523 -3.20399 8.24907 -3.20399 8.06974 -3.20399H4.77011V-6.50361C4.77011 -6.67098 4.77011 -6.88618 4.55492 -6.88618C4.32777 -6.88618 4.32777 -6.68294 4.32777 -6.50361V-3.20399H1.02814C0.860772 -3.20399 0.645579 -3.20399 0.645579 -2.98879C0.645579 -2.76164 0.848817 -2.76164 1.02814 -2.76164H4.32777V0.537983C4.32777 0.705355 4.32777 0.920548 4.54296 0.920548C4.77011 0.920548 4.77011 0.71731 4.77011 0.537983V-2.76164Z' id='eq1-g4-43'/>
<path d='M8.06974 -3.87347C8.23711 -3.87347 8.4523 -3.87347 8.4523 -4.08867C8.4523 -4.31582 8.24907 -4.31582 8.06974 -4.31582H1.02814C0.860772 -4.31582 0.645579 -4.31582 0.645579 -4.10062C0.645579 -3.87347 0.848817 -3.87347 1.02814 -3.87347H8.06974ZM8.06974 -1.64981C8.23711 -1.64981 8.4523 -1.64981 8.4523 -1.86501C8.4523 -2.09215 8.24907 -2.09215 8.06974 -2.09215H1.02814C0.860772 -2.09215 0.645579 -2.09215 0.645579 -1.87696C0.645579 -1.64981 0.848817 -1.64981 1.02814 -1.64981H8.06974Z' id='eq1-g4-61'/>
<path d='M4.69838 -7.93823C4.35168 -7.59153 4.10062 -7.35243 3.71806 -7.35243C3.53873 -7.35243 3.37136 -7.38829 3.00075 -7.63935C2.76164 -7.78281 2.52254 -7.93823 2.24757 -7.93823C1.80523 -7.93823 1.54222 -7.63935 0.980324 -7.01768L1.1477 -6.85031C1.4944 -7.19701 1.74545 -7.43611 2.12802 -7.43611C2.30735 -7.43611 2.47472 -7.40025 2.84533 -7.14919C3.08443 -7.00573 3.32354 -6.85031 3.59851 -6.85031C4.04085 -6.85031 4.30386 -7.14919 4.86575 -7.77086L4.69838 -7.93823Z' id='eq1-g4-126'/>
<path d='M2.50262 -5.07696C2.50262 -5.29215 2.48667 -5.30012 2.27148 -5.30012C1.94471 -4.98132 1.52229 -4.79004 0.765131 -4.79004V-4.52702C0.980324 -4.52702 1.41071 -4.52702 1.87298 -4.74222V-0.653549C1.87298 -0.358655 1.84907 -0.263014 1.09191 -0.263014H0.812951V0C1.13973 -0.0239103 1.82516 -0.0239103 2.18381 -0.0239103S3.23587 -0.0239103 3.56264 0V-0.263014H3.28369C2.52653 -0.263014 2.50262 -0.358655 2.50262 -0.653549V-5.07696Z' id='eq1-g3-49'/>
<path d='M2.24757 -1.6259C2.37509 -1.74545 2.70984 -2.00847 2.83736 -2.12005C3.33151 -2.57435 3.80174 -3.0127 3.80174 -3.73798C3.80174 -4.68643 3.00473 -5.30012 2.00847 -5.30012C1.05205 -5.30012 0.422416 -4.57484 0.422416 -3.8655C0.422416 -3.47497 0.73325 -3.41918 0.844832 -3.41918C1.0122 -3.41918 1.25928 -3.53873 1.25928 -3.84159C1.25928 -4.25604 0.860772 -4.25604 0.765131 -4.25604C0.996264 -4.83786 1.53026 -5.03711 1.9208 -5.03711C2.66202 -5.03711 3.04458 -4.40747 3.04458 -3.73798C3.04458 -2.90909 2.46276 -2.30336 1.52229 -1.33898L0.518057 -0.302864C0.422416 -0.215193 0.422416 -0.199253 0.422416 0H3.57061L3.80174 -1.42665H3.55467C3.53076 -1.26725 3.467 -0.868742 3.37136 -0.71731C3.32354 -0.653549 2.71781 -0.653549 2.59029 -0.653549H1.17161L2.24757 -1.6259Z' id='eq1-g3-50'/>
<path d='M2.01644 -2.66202C2.64608 -2.66202 3.04458 -2.19975 3.04458 -1.36289C3.04458 -0.366625 2.4787 -0.071731 2.05629 -0.071731C1.61793 -0.071731 1.02017 -0.231133 0.74122 -0.653549C1.02814 -0.653549 1.2274 -0.836862 1.2274 -1.09988C1.2274 -1.35492 1.04408 -1.53823 0.789041 -1.53823C0.573848 -1.53823 0.350685 -1.40274 0.350685 -1.08394C0.350685 -0.326775 1.16364 0.167372 2.07223 0.167372C3.13225 0.167372 3.87347 -0.565878 3.87347 -1.36289C3.87347 -2.02441 3.34745 -2.63014 2.5345 -2.80548C3.16413 -3.02864 3.63437 -3.57061 3.63437 -4.20822S2.91706 -5.30012 2.08817 -5.30012C1.23537 -5.30012 0.589788 -4.83786 0.589788 -4.23213C0.589788 -3.93724 0.789041 -3.80971 0.996264 -3.80971C1.24334 -3.80971 1.40274 -3.98506 1.40274 -4.21619C1.40274 -4.51108 1.1477 -4.62267 0.972354 -4.63064C1.3071 -5.06899 1.9208 -5.0929 2.06426 -5.0929C2.27148 -5.0929 2.87721 -5.02914 2.87721 -4.20822C2.87721 -3.65031 2.64608 -3.31557 2.5345 -3.18804C2.29539 -2.94097 2.11208 -2.92503 1.6259 -2.89315C1.47447 -2.88518 1.41071 -2.87721 1.41071 -2.7736C1.41071 -2.66202 1.48244 -2.66202 1.61793 -2.66202H2.01644Z' id='eq1-g3-51'/>
<path d='M2.41494 13.856H4.71034V13.3778H2.89315V0H4.71034V-0.478207H2.41494V13.856Z' id='eq1-g1-2'/>
<path d='M2.55841 13.856V-0.478207H0.263014V0H2.0802V13.3778H0.263014V13.856H2.55841Z' id='eq1-g1-3'/>
<path d='M3.89738 21.0411H4.72229V0.358655H7.87846V-0.466252H3.89738V21.0411Z' id='eq1-g1-50'/>
<path d='M3.23985 21.0411H4.06476V-0.466252H0.0836862V0.358655H3.23985V21.0411Z' id='eq1-g1-51'/>
<path d='M3.89738 21.0291H7.87846V20.2042H4.72229V-0.478207H3.89738V21.0291Z' id='eq1-g1-52'/>
<path d='M3.23985 20.2042H0.0836862V21.0291H4.06476V-0.478207H3.23985V20.2042Z' id='eq1-g1-53'/>
<path d='M2.11208 -3.77783C2.15193 -3.88144 2.18381 -3.93724 2.18381 -4.01694C2.18381 -4.27995 1.94471 -4.45529 1.72154 -4.45529C1.40274 -4.45529 1.31507 -4.17634 1.28319 -4.06476L0.270984 -0.629639C0.239103 -0.533998 0.239103 -0.510087 0.239103 -0.502117C0.239103 -0.430386 0.286924 -0.414446 0.366625 -0.390535C0.510087 -0.326775 0.526027 -0.326775 0.541968 -0.326775C0.565878 -0.326775 0.613699 -0.326775 0.669489 -0.462267L2.11208 -3.77783Z' id='eq1-g2-48'/>
</defs>
<g id='eq1-page1'>
<use x='119.635' xlink:href='#eq1-g4-126' y='-18.8459'/>
<use x='119.012' xlink:href='#eq1-g0-120' y='-18.6799'/>
<use x='126.11' xlink:href='#eq1-g2-48' y='-23.6161'/>
<use x='132.226' xlink:href='#eq1-g4-61' y='-18.6799'/>
<use x='144.652' xlink:href='#eq1-g1-2' y='-28.3637'/>
<use x='149.633' xlink:href='#eq1-g0-8' y='-18.7796'/>
<use x='159.347' xlink:href='#eq1-g3-49' y='-16.9863'/>
<use x='174.042' xlink:href='#eq1-g0-8' y='-18.7796'/>
<use x='183.755' xlink:href='#eq1-g3-50' y='-16.9863'/>
<use x='198.45' xlink:href='#eq1-g0-8' y='-18.7796'/>
<use x='208.164' xlink:href='#eq1-g3-51' y='-16.9863'/>
<use x='212.896' xlink:href='#eq1-g1-3' y='-28.3637'/>
<use x='219.87' xlink:href='#eq1-g1-50' y='-42.71'/>
<use x='219.87' xlink:href='#eq1-g1-52' y='-21.1905'/>
<use x='228.463' xlink:href='#eq1-g4-126' y='-33.3914'/>
<use x='227.84' xlink:href='#eq1-g0-120' y='-33.2254'/>
<use x='234.938' xlink:href='#eq1-g3-49' y='-31.4321'/>
<use x='228.463' xlink:href='#eq1-g4-126' y='-18.9456'/>
<use x='227.84' xlink:href='#eq1-g0-120' y='-18.7796'/>
<use x='234.938' xlink:href='#eq1-g3-50' y='-16.9863'/>
<use x='228.463' xlink:href='#eq1-g4-126' y='-4.4998'/>
<use x='227.84' xlink:href='#eq1-g0-120' y='-4.33378'/>
<use x='234.938' xlink:href='#eq1-g3-51' y='-2.54052'/>
<use x='239.671' xlink:href='#eq1-g1-51' y='-42.71'/>
<use x='239.671' xlink:href='#eq1-g1-53' y='-21.1905'/>
<use x='250.298' xlink:href='#eq1-g4-43' y='-18.6799'/>
<use x='262.059' xlink:href='#eq1-g0-110' y='-18.6799'/>
</g>
</svg></div>
          </div></section>
          <section class="m-doc-details" id="a0ce1a0cb854bf687285500e55b8260f7"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a0ce1a0cb854bf687285500e55b8260f7" class="m-doc-self">EKFUpdate</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; H_order,
              const Eigen::MatrixXd&amp; H,
              const Eigen::VectorXd&amp; res,
              const Eigen::MatrixXd&amp; R)</span></span>
            </h3>
            <p>Performs EKF update of the state (see <a href="update.html#linear-meas" class="m-doc">Linear Measurement Update</a> page)</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>H_order</td>
                  <td>Variable ordering used in the compressed Jacobian</td>
                </tr>
                <tr>
                  <td>H</td>
                  <td>Condensed Jacobian of updating measurement</td>
                </tr>
                <tr>
                  <td>res</td>
                  <td>residual of updating measurement</td>
                </tr>
                <tr>
                  <td>R</td>
                  <td>updating measurement covariance</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a2552a9b41e3287fd9f0638656f52c279"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a2552a9b41e3287fd9f0638656f52c279" class="m-doc-self">fix_4dof_gauge_freedoms</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const Eigen::Vector4d&amp; q_GtoI)</span></span>
            </h3>
            <p>This will fix the initial covariance matrix gauge freedoms (4dof, yaw and position).</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>q_GtoI</td>
                  <td>Initial rotation from global frame to the first ever IMU orientation.</td>
                </tr>
              </tbody>
            </table>
<p>A VIO system has 4dof unobservabile directions which can be arbitarily picked. This means that on startup, we can fix the yaw and position to be 100 percent known. Thus, after determining the global to current IMU orientation after initialization, we can propagate the global error into the new IMU pose. In this case the position is directly equivilent, but the orientation needs to be propagated.</p>
          </div></section>
          <section class="m-doc-details" id="ae49342fcfb15f992f8742b904ff1ab3c"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static Eigen::MatrixXd ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ae49342fcfb15f992f8742b904ff1ab3c" class="m-doc-self">get_marginal_covariance</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; small_variables)</span></span>
            </h3>
            <p>For a given set of variables, this will this will calculate a smaller covariance.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>small_variables</td>
                  <td>Vector of variables whose marginal covariance is desired</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>marginal covariance of the passed variables</td>
                </tr>
              </tfoot>
            </table>
<p>That only includes the ones specified with all crossterms. Thus the size of the return will be the summed dimension of all the passed variables. Normal use for this is a chi-squared check before update (where you don&#x27;t need the full covariance).</p>
          </div></section>
          <section class="m-doc-details" id="a2ac98543816e664cd85e4fa61bd165b7"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static Eigen::MatrixXd ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a2ac98543816e664cd85e4fa61bd165b7" class="m-doc-self">get_full_covariance</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state)</span></span>
            </h3>
            <p>This gets the full covariance matrix.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>covariance of current state</td>
                </tr>
              </tfoot>
            </table>
<p>Should only be used during simulation as operations on this covariance will be slow. This will return a copy, so this cannot be used to change the covariance by design. Please use the other interface functions in the <a href="classov__msckf_1_1StateHelper.html" class="m-doc">StateHelper</a> to progamatically change to covariance.</p>
          </div></section>
          <section class="m-doc-details" id="a8ea2f61ff85d1404e561b3e2a971d3a8"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a8ea2f61ff85d1404e561b3e2a971d3a8" class="m-doc-self">marginalize</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt; marg)</span></span>
            </h3>
            <p>Marginalizes a variable, properly modifying the ordering/covariances in the state.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>marg</td>
                  <td>Pointer to variable to marginalize</td>
                </tr>
              </tbody>
            </table>
<p>This function can support any Type variable out of the box. Right now the marginalization of a sub-variable/type is not supported. For example if you wanted to just marginalize the orientation of a PoseJPL, that isn&#x27;t supported. We will first remove the rows and columns corresponding to the type (i.e. do the marginalization). After we update all the type ids so that they take into account that the covariance has shrunk in parts of it.</p>
          </div></section>
          <section class="m-doc-details" id="a85147edb95990cc260c66a6746033421"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt; ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a85147edb95990cc260c66a6746033421" class="m-doc-self">clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt; variable_to_clone)</span></span>
            </h3>
            <p>Clones &quot;variable to clone&quot; and places it at end of covariance.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>variable_to_clone</td>
                  <td>Pointer to variable that will be cloned</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="ac3e10c58e618a813a9eee2fd347f34aa"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static bool ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ac3e10c58e618a813a9eee2fd347f34aa" class="m-doc-self">initialize</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt; new_variable,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; H_order,
              Eigen::MatrixXd&amp; H_R,
              Eigen::MatrixXd&amp; H_L,
              Eigen::MatrixXd&amp; R,
              Eigen::VectorXd&amp; res,
              double chi_2_mult)</span></span>
            </h3>
            <p>Initializes new variable into covariance.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>new_variable</td>
                  <td>Pointer to variable to be initialized</td>
                </tr>
                <tr>
                  <td>H_order</td>
                  <td>Vector of pointers in order they are contained in the condensed state Jacobian</td>
                </tr>
                <tr>
                  <td>H_R</td>
                  <td>Jacobian of initializing measurements wrt variables in H_order</td>
                </tr>
                <tr>
                  <td>H_L</td>
                  <td>Jacobian of initializing measurements wrt new variable</td>
                </tr>
                <tr>
                  <td>R</td>
                  <td>Covariance of initializing measurements (isotropic)</td>
                </tr>
                <tr>
                  <td>res</td>
                  <td>Residual of initializing measurements</td>
                </tr>
                <tr>
                  <td>chi_2_mult</td>
                  <td>Value we should multiply the chi2 threshold by (larger means it will be accepted more measurements)</td>
                </tr>
              </tbody>
            </table>
<p>Uses Givens to separate into updating and initializing systems (therefore system must be fed as isotropic). If you are not isotropic first whiten your system (TODO: we should add a helper function to do this). If your H_L Jacobian is already directly invertable, the just call the <a href="classov__msckf_1_1StateHelper.html#a645d15e6ea6b4c9e36341561a62a0c24" class="m-doc">initialize_<wbr />invertible()</a> instead of this function. Please refer to <a href="update-delay.html" class="m-doc">Delayed Feature Initialization</a> page for detailed derivation.</p>
          </div></section>
          <section class="m-doc-details" id="a645d15e6ea6b4c9e36341561a62a0c24"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a645d15e6ea6b4c9e36341561a62a0c24" class="m-doc-self">initialize_invertible</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt; new_variable,
              const std::vector&lt;std::shared_ptr&lt;<a href="classov__type_1_1Type.html" class="m-doc">Type</a>&gt;&gt;&amp; H_order,
              const Eigen::MatrixXd&amp; H_R,
              const Eigen::MatrixXd&amp; H_L,
              const Eigen::MatrixXd&amp; R,
              const Eigen::VectorXd&amp; res)</span></span>
            </h3>
            <p>Initializes new variable into covariance (H_L must be invertible)</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>new_variable</td>
                  <td>Pointer to variable to be initialized</td>
                </tr>
                <tr>
                  <td>H_order</td>
                  <td>Vector of pointers in order they are contained in the condensed state Jacobian</td>
                </tr>
                <tr>
                  <td>H_R</td>
                  <td>Jacobian of initializing measurements wrt variables in H_order</td>
                </tr>
                <tr>
                  <td>H_L</td>
                  <td>Jacobian of initializing measurements wrt new variable (needs to be invertible)</td>
                </tr>
                <tr>
                  <td>R</td>
                  <td>Covariance of initializing measurements</td>
                </tr>
                <tr>
                  <td>res</td>
                  <td>Residual of initializing measurements</td>
                </tr>
              </tbody>
            </table>
<p>Please refer to <a href="update-delay.html" class="m-doc">Delayed Feature Initialization</a> page for detailed derivation. This is just the update assuming that H_L is invertable (and thus square) and isotropic noise.</p>
          </div></section>
          <section class="m-doc-details" id="ade3a86a89f15cc6e03a6430fd1dee694"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ade3a86a89f15cc6e03a6430fd1dee694" class="m-doc-self">augment_clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state,
              Eigen::Matrix&lt;double, 3, 1&gt; last_w)</span></span>
            </h3>
            <p>Augment the state with a stochastic copy of the current IMU pose.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
                <tr>
                  <td>last_w</td>
                  <td>The estimated angular velocity at cloning time (used to estimate imu-cam time offset)</td>
                </tr>
              </tbody>
            </table>
<p>After propagation, normally we augment the state with an new clone that is at the new update timestep. This augmentation clones the IMU pose and adds it to our state&#x27;s clone map. If we are doing time offset calibration we also make our cloning a function of the time offset. Time offset logic is based on Mingyang Li and Anastasios I. Mourikis paper: <a href="http://journals.sagepub.com/doi/pdf/10.1177/0278364913515286">http:/<wbr />/<wbr />journals.sagepub.com/<wbr />doi/<wbr />pdf/<wbr />10.1177/<wbr />0278364913515286</a> We can write the current clone at the true imu base clock time as the follow:</p><div class="m-math"><svg style="width: 15.613em; height: 5.300em;" viewBox="119.876 -50.8755 149.882 50.8755">
<title>
\begin{align*} {}^{I_{t+t_d}}_G\bar{q} &amp;= \begin{bmatrix}\frac{1}{2} {}^{I_{t+\hat{t}_d}}\boldsymbol\omega \tilde{t}_d \\ 1\end{bmatrix}\otimes{}^{I_{t+\hat{t}_d}}_G\bar{q} \\ {}^G\mathbf{p}_{I_{t+t_d}} &amp;= {}^G\mathbf{p}_{I_{t+\hat{t}_d}} + {}^G\mathbf{v}_{I_{t+\hat{t}_d}}\tilde{t}_d \end{align*}
</title>
<defs>
<path d='M4.32777 -1.67372C4.62665 -2.22366 4.79402 -2.80946 4.79402 -3.0127C4.79402 -3.27572 4.65056 -3.53873 4.33973 -3.53873C3.59851 -3.53873 3.51482 -2.27148 3.50286 -1.94869C3.49091 -1.76936 3.47895 -1.75741 3.467 -1.74545C3.28767 -1.56613 2.7736 -1.21943 2.13998 -1.21943C1.35093 -1.21943 0.896638 -1.7335 0.896638 -2.40299C0.896638 -2.7736 1.11183 -3.67024 1.93674 -4.79402C2.04433 -4.92553 2.06824 -4.96139 2.06824 -5.05704C2.06824 -5.2005 1.94869 -5.30809 1.81719 -5.30809C1.69763 -5.30809 1.6259 -5.23636 1.61395 -5.23636C1.55417 -5.17659 0.263014 -3.61046 0.263014 -1.90087C0.263014 -0.6934 0.872727 0.0956413 1.88892 0.0956413C2.73773 0.0956413 3.40722 -0.478207 3.67024 -0.765131C3.82565 -0.406476 4.17235 0.0956413 4.96139 0.0956413C5.98954 0.0956413 6.91009 -0.657534 7.43611 -1.47049C8.16538 -2.60623 8.27298 -4.13649 8.27298 -4.30386C8.27298 -5.22441 7.72304 -5.41569 7.47198 -5.41569C7.01768 -5.41569 6.56339 -4.93748 6.56339 -4.5071C6.56339 -4.19626 6.79054 -4.0528 6.91009 -3.95716C7.22092 -3.75392 7.48394 -3.467 7.48394 -3.08443C7.48394 -2.29539 6.45579 -1.21943 5.21245 -1.21943C4.86575 -1.21943 4.54296 -1.31507 4.32777 -1.67372Z' id='eq2-g0-33'/>
<path d='M2.50262 -5.07696C2.50262 -5.29215 2.48667 -5.30012 2.27148 -5.30012C1.94471 -4.98132 1.52229 -4.79004 0.765131 -4.79004V-4.52702C0.980324 -4.52702 1.41071 -4.52702 1.87298 -4.74222V-0.653549C1.87298 -0.358655 1.84907 -0.263014 1.09191 -0.263014H0.812951V0C1.13973 -0.0239103 1.82516 -0.0239103 2.18381 -0.0239103S3.23587 -0.0239103 3.56264 0V-0.263014H3.28369C2.52653 -0.263014 2.50262 -0.358655 2.50262 -0.653549V-5.07696Z' id='eq2-g8-49'/>
<path d='M2.24757 -1.6259C2.37509 -1.74545 2.70984 -2.00847 2.83736 -2.12005C3.33151 -2.57435 3.80174 -3.0127 3.80174 -3.73798C3.80174 -4.68643 3.00473 -5.30012 2.00847 -5.30012C1.05205 -5.30012 0.422416 -4.57484 0.422416 -3.8655C0.422416 -3.47497 0.73325 -3.41918 0.844832 -3.41918C1.0122 -3.41918 1.25928 -3.53873 1.25928 -3.84159C1.25928 -4.25604 0.860772 -4.25604 0.765131 -4.25604C0.996264 -4.83786 1.53026 -5.03711 1.9208 -5.03711C2.66202 -5.03711 3.04458 -4.40747 3.04458 -3.73798C3.04458 -2.90909 2.46276 -2.30336 1.52229 -1.33898L0.518057 -0.302864C0.422416 -0.215193 0.422416 -0.199253 0.422416 0H3.57061L3.80174 -1.42665H3.55467C3.53076 -1.26725 3.467 -0.868742 3.37136 -0.71731C3.32354 -0.653549 2.71781 -0.653549 2.59029 -0.653549H1.17161L2.24757 -1.6259Z' id='eq2-g8-50'/>
<path d='M3.37136 1.80523H2.54645V-0.490162C2.84533 -0.227148 3.37136 0.071731 4.08867 0.071731C5.72653 0.071731 7.00573 -0.920548 7.00573 -2.666C7.00573 -4.31582 5.8939 -5.37983 4.27995 -5.37983C3.5746 -5.37983 2.96488 -5.14072 2.48667 -4.75816V-5.37983L0.418431 -5.28418V-4.77011C1.15965 -4.77011 1.24334 -4.77011 1.24334 -4.30386V1.80523H0.418431V2.3193C0.6934 2.29539 1.55417 2.29539 1.88892 2.29539S3.09639 2.29539 3.37136 2.3193V1.80523ZM2.54645 -4.18431C2.98879 -4.75816 3.62242 -4.94944 4.08867 -4.94944C4.86575 -4.94944 5.57111 -4.24408 5.57111 -2.666C5.57111 -0.932503 4.71034 -0.32279 3.94521 -0.32279C3.43113 -0.32279 2.91706 -0.585803 2.54645 -1.1477V-4.18431Z' id='eq2-g1-112'/>
<path d='M5.91781 -4.51905C6.00149 -4.69838 6.04932 -4.79402 6.80249 -4.79402V-5.30809C6.3721 -5.28418 6.34819 -5.28418 5.85803 -5.28418C5.53524 -5.28418 5.51133 -5.28418 4.82989 -5.30809V-4.79402C5.15268 -4.79402 5.41569 -4.73425 5.41569 -4.65056C5.41569 -4.63861 5.41569 -4.62665 5.35592 -4.5071L3.95716 -1.43462L2.41494 -4.79402H3.07248V-5.30809C2.79751 -5.28418 1.96065 -5.28418 1.63786 -5.28418C1.29116 -5.28418 0.597758 -5.28418 0.286924 -5.30809V-4.79402H1.0401L3.14421 -0.227148C3.25181 0 3.27572 0.0597758 3.55068 0.0597758C3.74197 0.0597758 3.83761 0.0358655 3.94521 -0.203238L5.91781 -4.51905Z' id='eq2-g1-118'/>
<path d='M8.63163 -2.98879C8.63163 -5.18854 6.83836 -6.96986 4.65056 -6.96986C2.4269 -6.96986 0.657534 -5.16463 0.657534 -2.98879C0.657534 -0.789041 2.45081 0.992279 4.63861 0.992279C6.86227 0.992279 8.63163 -0.812951 8.63163 -2.98879ZM2.27148 -5.55915C2.24757 -5.58306 2.16389 -5.66675 2.16389 -5.69066C2.16389 -5.73848 3.13225 -6.67098 4.63861 -6.67098C5.05704 -6.67098 6.15691 -6.61121 7.13724 -5.69066L4.65056 -3.19203L2.27148 -5.55915ZM1.92478 -0.490162C1.19552 -1.30311 0.956413 -2.22366 0.956413 -2.98879C0.956413 -3.90934 1.30311 -4.78207 1.92478 -5.48742L4.42341 -2.98879L1.92478 -0.490162ZM7.35243 -5.48742C7.92628 -4.87771 8.33275 -3.96912 8.33275 -2.98879C8.33275 -2.06824 7.98605 -1.19552 7.36438 -0.490162L4.86575 -2.98879L7.35243 -5.48742ZM7.01768 -0.418431C7.04159 -0.394521 7.12528 -0.310834 7.12528 -0.286924C7.12528 -0.239103 6.15691 0.6934 4.65056 0.6934C4.23213 0.6934 3.13225 0.633624 2.15193 -0.286924L4.63861 -2.78555L7.01768 -0.418431Z' id='eq2-g3-10'/>
<path d='M3.61644 -3.96912C3.62242 -3.99303 3.63437 -4.02889 3.63437 -4.05878C3.63437 -4.15442 3.51482 -4.14844 3.44309 -4.14247L2.7736 -4.08867C2.67198 -4.08269 2.59427 -4.07671 2.59427 -3.93923C2.59427 -3.84359 2.67198 -3.84359 2.76164 -3.84359C2.94097 -3.84359 2.98281 -3.83163 3.06052 -3.80174C3.05455 -3.71208 3.05455 -3.70012 3.03661 -3.62242C2.91108 -3.10834 2.81544 -2.70785 2.69589 -2.27746C2.6122 -2.41494 2.40897 -2.63611 2.03836 -2.63611C1.27323 -2.63611 0.448319 -1.83512 0.448319 -0.956413C0.448319 -0.310834 0.902615 0.0597758 1.41071 0.0597758C1.81121 0.0597758 2.15193 -0.215193 2.30137 -0.364633C2.41494 0.0119552 2.81544 0.0597758 2.94695 0.0597758C3.16214 0.0597758 3.31756 -0.0597758 3.43113 -0.245081C3.58057 -0.484184 3.66426 -0.830884 3.66426 -0.860772C3.66426 -0.872727 3.65828 -0.944458 3.55068 -0.944458C3.46102 -0.944458 3.44907 -0.902615 3.42516 -0.806974C3.32951 -0.442341 3.20399 -0.137484 2.97086 -0.137484C2.76762 -0.137484 2.74969 -0.352677 2.74969 -0.442341C2.74969 -0.52005 2.74969 -0.537983 2.77958 -0.645579L3.61644 -3.96912ZM2.32528 -0.783064C2.29539 -0.675467 2.29539 -0.663512 2.21171 -0.573848C1.88294 -0.203238 1.57808 -0.137484 1.42864 -0.137484C1.18954 -0.137484 0.956413 -0.298879 0.956413 -0.723288C0.956413 -0.968369 1.08194 -1.55417 1.27323 -1.89489C1.45255 -2.21768 1.75741 -2.43885 2.04433 -2.43885C2.49265 -2.43885 2.60623 -1.96663 2.60623 -1.92478L2.58829 -1.8411L2.32528 -0.783064Z' id='eq2-g4-100'/>
<path d='M1.60797 -2.33724H2.25953C2.37908 -2.33724 2.46276 -2.33724 2.46276 -2.48667C2.46276 -2.57634 2.38506 -2.57634 2.27746 -2.57634H1.66775L1.87696 -3.40125C1.90087 -3.49091 1.90087 -3.52677 1.90087 -3.53275C1.90087 -3.67621 1.7873 -3.73599 1.69166 -3.73599C1.61993 -3.73599 1.46451 -3.69415 1.41071 -3.50286L1.17758 -2.57634H0.532005C0.406476 -2.57634 0.400498 -2.57036 0.376588 -2.55243C0.3467 -2.52852 0.32279 -2.45081 0.32279 -2.42092C0.340722 -2.33724 0.394521 -2.33724 0.514072 -2.33724H1.11781L0.765131 -0.926526C0.729265 -0.789041 0.681445 -0.585803 0.681445 -0.514072C0.681445 -0.167372 0.992279 0.0597758 1.35691 0.0597758C2.04433 0.0597758 2.45081 -0.759153 2.45081 -0.860772C2.45081 -0.878705 2.43885 -0.944458 2.33724 -0.944458C2.25953 -0.944458 2.24757 -0.91457 2.21768 -0.842839C2.01445 -0.394521 1.67372 -0.137484 1.38082 -0.137484C1.15965 -0.137484 1.15367 -0.358655 1.15367 -0.436364C1.15367 -0.52005 1.15367 -0.532005 1.18356 -0.645579L1.60797 -2.33724Z' id='eq2-g4-116'/>
<path d='M2.98879 28.2022H6.133V27.5447H3.64633V0.179328H6.133V-0.478207H2.98879V28.2022Z' id='eq2-g2-20'/>
<path d='M2.65405 27.5447H0.167372V28.2022H3.31158V-0.478207H0.167372V0.179328H2.65405V27.5447Z' id='eq2-g2-21'/>
<path d='M5.27223 -5.15268C5.27223 -5.21245 5.22441 -5.26027 5.16463 -5.26027C5.06899 -5.26027 4.60274 -4.82989 4.37559 -4.41146C4.1604 -4.94944 3.78979 -5.27223 3.27572 -5.27223C1.92478 -5.27223 0.466252 -3.52677 0.466252 -1.75741C0.466252 -0.573848 1.15965 0.119552 1.9726 0.119552C2.60623 0.119552 3.13225 -0.358655 3.38331 -0.633624L3.39527 -0.621669L2.94097 1.17161L2.83337 1.60199C2.72578 1.96065 2.54645 1.96065 1.98456 1.9726C1.85305 1.9726 1.7335 1.9726 1.7335 2.19975C1.7335 2.28344 1.80523 2.3193 1.88892 2.3193C2.05629 2.3193 2.27148 2.29539 2.43885 2.29539H3.65828C3.83761 2.29539 4.04085 2.3193 4.22017 2.3193C4.29191 2.3193 4.43537 2.3193 4.43537 2.09215C4.43537 1.9726 4.33973 1.9726 4.1604 1.9726C3.59851 1.9726 3.56264 1.88892 3.56264 1.79328C3.56264 1.7335 3.5746 1.72154 3.61046 1.56613L5.27223 -5.15268ZM3.58655 -1.42267C3.52677 -1.21943 3.52677 -1.19552 3.3594 -0.968369C3.09639 -0.633624 2.57036 -0.119552 2.00847 -0.119552C1.51831 -0.119552 1.24334 -0.561893 1.24334 -1.26725C1.24334 -1.92478 1.61395 -3.26376 1.8411 -3.76588C2.24757 -4.60274 2.80946 -5.03313 3.27572 -5.03313C4.06476 -5.03313 4.22017 -4.0528 4.22017 -3.95716C4.22017 -3.94521 4.18431 -3.78979 4.17235 -3.76588L3.58655 -1.42267Z' id='eq2-g6-113'/>
<path d='M2.40299 -4.80598H3.50286C3.73001 -4.80598 3.84956 -4.80598 3.84956 -5.02117C3.84956 -5.15268 3.77783 -5.15268 3.53873 -5.15268H2.48667L2.92902 -6.89813C2.97684 -7.0655 2.97684 -7.08941 2.97684 -7.1731C2.97684 -7.36438 2.82142 -7.47198 2.666 -7.47198C2.57036 -7.47198 2.29539 -7.43611 2.19975 -7.05355L1.7335 -5.15268H0.609714C0.37061 -5.15268 0.263014 -5.15268 0.263014 -4.92553C0.263014 -4.80598 0.3467 -4.80598 0.573848 -4.80598H1.63786L0.848817 -1.64981C0.753176 -1.23138 0.71731 -1.11183 0.71731 -0.956413C0.71731 -0.394521 1.11183 0.119552 1.78132 0.119552C2.98879 0.119552 3.63437 -1.6259 3.63437 -1.70959C3.63437 -1.78132 3.58655 -1.81719 3.51482 -1.81719C3.49091 -1.81719 3.44309 -1.81719 3.41918 -1.76936C3.40722 -1.75741 3.39527 -1.74545 3.31158 -1.55417C3.06052 -0.956413 2.51059 -0.119552 1.81719 -0.119552C1.45853 -0.119552 1.43462 -0.418431 1.43462 -0.681445C1.43462 -0.6934 1.43462 -0.920548 1.47049 -1.06401L2.40299 -4.80598Z' id='eq2-g6-116'/>
<path d='M6.35218 -5.39577C6.36015 -5.42765 6.37609 -5.47547 6.37609 -5.51532C6.37609 -5.57111 6.32827 -5.61096 6.27248 -5.61096S6.19278 -5.58705 6.12902 -5.51532L5.57111 -4.90162C5.20448 -5.41171 4.68643 -5.61096 4.14446 -5.61096C2.27945 -5.61096 0.422416 -3.88941 0.422416 -2.06426C0.422416 -0.73325 1.41071 0.167372 2.76563 0.167372C3.6264 0.167372 4.26401 -0.143462 4.5589 -0.486177C4.65455 -0.231133 4.84583 -0.00797011 4.92553 -0.00797011C4.95741 -0.00797011 4.99726 -0.0239103 5.0132 -0.0557908C5.06102 -0.191283 5.2523 -1.00423 5.30809 -1.2274C5.37983 -1.5462 5.43562 -1.76936 5.48344 -1.83313C5.55517 -1.92877 5.7066 -1.93674 5.9457 -1.93674C5.98555 -1.93674 6.10511 -1.93674 6.10511 -2.0802C6.10511 -2.1599 6.04932 -2.19975 5.98555 -2.19975C5.92976 -2.19975 5.83412 -2.17584 5.06102 -2.17584C4.86177 -2.17584 4.59078 -2.17584 4.47123 -2.18381S4.03288 -2.19975 3.91333 -2.19975C3.8655 -2.19975 3.74595 -2.19975 3.74595 -2.04832C3.74595 -1.93674 3.83362 -1.93674 4.04085 -1.93674C4.20822 -1.93674 4.51108 -1.93674 4.70237 -1.86501C4.71034 -1.84907 4.71831 -1.80125 4.71831 -1.76936C4.71831 -1.72951 4.67049 -1.55417 4.64658 -1.45056C4.59875 -1.24334 4.51108 -0.908593 4.4792 -0.828892C4.22416 -0.294894 3.45106 -0.0956413 2.90112 -0.0956413C2.11208 -0.0956413 1.18755 -0.510087 1.18755 -1.80922C1.18755 -2.47073 1.45853 -3.61843 2.1599 -4.38356C2.92503 -5.21245 3.7858 -5.34795 4.20025 -5.34795C5.1726 -5.34795 5.61893 -4.58281 5.61893 -3.77783C5.61893 -3.66625 5.58705 -3.52279 5.58705 -3.42715C5.58705 -3.32354 5.69066 -3.32354 5.72254 -3.32354C5.82615 -3.32354 5.84209 -3.35542 5.87397 -3.49888L6.35218 -5.39577Z' id='eq2-g5-71'/>
<path d='M3.0924 -4.82192C3.16413 -5.10087 3.18007 -5.18057 3.77783 -5.18057C3.96115 -5.18057 4.05679 -5.18057 4.05679 -5.332C4.05679 -5.33998 4.04882 -5.44359 3.9213 -5.44359C3.80174 -5.44359 3.55467 -5.42765 3.42715 -5.41968H2.32727C2.21569 -5.42765 1.92877 -5.44359 1.81719 -5.44359C1.78531 -5.44359 1.65778 -5.44359 1.65778 -5.29215C1.65778 -5.18057 1.75342 -5.18057 1.91283 -5.18057C2.41494 -5.18057 2.41494 -5.13275 2.41494 -5.03711C2.41494 -5.02117 2.41494 -4.98132 2.38306 -4.8538L1.32304 -0.629639C1.25131 -0.342715 1.2274 -0.263014 0.637609 -0.263014C0.446326 -0.263014 0.358655 -0.263014 0.358655 -0.111582C0.358655 -0.071731 0.390535 0 0.486177 0C0.597758 0 0.860772 -0.0159402 0.980324 -0.0239103H2.08817C2.19975 -0.0159402 2.48667 0 2.59826 0C2.64608 0 2.75766 0 2.75766 -0.151432C2.75766 -0.263014 2.66202 -0.263014 2.49465 -0.263014C2.37509 -0.263014 2.32727 -0.263014 2.19178 -0.278954S1.99253 -0.302864 1.99253 -0.390535C1.99253 -0.430386 2.0005 -0.430386 2.02441 -0.541968L3.0924 -4.82192Z' id='eq2-g5-73'/>
<path d='M4.28792 -5.29215C4.29589 -5.30809 4.3198 -5.41171 4.3198 -5.41968C4.3198 -5.45953 4.28792 -5.53126 4.19228 -5.53126C4.1604 -5.53126 3.91333 -5.50735 3.73001 -5.49141L3.28369 -5.45953C3.10834 -5.44359 3.02864 -5.43562 3.02864 -5.29215C3.02864 -5.18057 3.14022 -5.18057 3.23587 -5.18057C3.61843 -5.18057 3.61843 -5.13275 3.61843 -5.06102C3.61843 -5.0132 3.55467 -4.75019 3.51482 -4.59078L3.12428 -3.03661C3.05255 -3.1721 2.82142 -3.51482 2.33524 -3.51482C1.3868 -3.51482 0.342715 -2.40697 0.342715 -1.2274C0.342715 -0.398506 0.876712 0.0797011 1.49041 0.0797011C2.0005 0.0797011 2.43885 -0.326775 2.58232 -0.486177C2.72578 0.0637609 3.26775 0.0797011 3.36339 0.0797011C3.73001 0.0797011 3.91333 -0.223163 3.97709 -0.358655C4.13649 -0.645579 4.24807 -1.10785 4.24807 -1.13973C4.24807 -1.18755 4.21619 -1.24334 4.12055 -1.24334S4.00897 -1.19552 3.96115 -0.996264C3.84956 -0.557908 3.69813 -0.143462 3.3873 -0.143462C3.20399 -0.143462 3.13225 -0.294894 3.13225 -0.518057C3.13225 -0.669489 3.15616 -0.757161 3.18007 -0.860772L4.28792 -5.29215ZM2.58232 -0.860772C2.18381 -0.310834 1.76936 -0.143462 1.51432 -0.143462C1.1477 -0.143462 0.964384 -0.478207 0.964384 -0.892653C0.964384 -1.26725 1.17958 -2.12005 1.35492 -2.47073C1.58605 -2.95691 1.97659 -3.29166 2.34321 -3.29166C2.86127 -3.29166 3.0127 -2.70984 3.0127 -2.6142C3.0127 -2.58232 2.81345 -1.80125 2.76563 -1.59402C2.66202 -1.21943 2.66202 -1.20349 2.58232 -0.860772Z' id='eq2-g5-100'/>
<path d='M2.94695 -1.33898H4.87771C4.96139 -1.33898 5.11083 -1.33898 5.11083 -1.4944S4.96139 -1.64981 4.87771 -1.64981H2.94695V-3.58655C2.94695 -3.67024 2.94695 -3.81968 2.79153 -3.81968S2.63611 -3.67024 2.63611 -3.58655V-1.64981H0.705355C0.621669 -1.64981 0.472229 -1.64981 0.472229 -1.4944S0.621669 -1.33898 0.705355 -1.33898H2.63611V0.597758C2.63611 0.681445 2.63611 0.830884 2.79153 0.830884S2.94695 0.681445 2.94695 0.597758V-1.33898Z' id='eq2-g7-43'/>
<path d='M1.82316 -4.14844L0.89066 -3.35342L1.02217 -3.18007L1.82316 -3.77186L2.62416 -3.18007L2.75567 -3.35342L1.82316 -4.14844Z' id='eq2-g7-94'/>
<path d='M5.03313 -6.65903V-7.00573H0.812951V-6.65903H5.03313Z' id='eq2-g9-22'/>
<path d='M4.77011 -2.76164H8.06974C8.23711 -2.76164 8.4523 -2.76164 8.4523 -2.97684C8.4523 -3.20399 8.24907 -3.20399 8.06974 -3.20399H4.77011V-6.50361C4.77011 -6.67098 4.77011 -6.88618 4.55492 -6.88618C4.32777 -6.88618 4.32777 -6.68294 4.32777 -6.50361V-3.20399H1.02814C0.860772 -3.20399 0.645579 -3.20399 0.645579 -2.98879C0.645579 -2.76164 0.848817 -2.76164 1.02814 -2.76164H4.32777V0.537983C4.32777 0.705355 4.32777 0.920548 4.54296 0.920548C4.77011 0.920548 4.77011 0.71731 4.77011 0.537983V-2.76164Z' id='eq2-g9-43'/>
<path d='M3.44309 -7.66326C3.44309 -7.93823 3.44309 -7.95019 3.20399 -7.95019C2.91706 -7.6274 2.3193 -7.18506 1.08792 -7.18506V-6.83836C1.36289 -6.83836 1.96065 -6.83836 2.61818 -7.14919V-0.920548C2.61818 -0.490162 2.58232 -0.3467 1.53026 -0.3467H1.15965V0C1.48244 -0.0239103 2.64209 -0.0239103 3.03661 -0.0239103S4.57883 -0.0239103 4.90162 0V-0.3467H4.53101C3.47895 -0.3467 3.44309 -0.490162 3.44309 -0.920548V-7.66326Z' id='eq2-g9-49'/>
<path d='M8.06974 -3.87347C8.23711 -3.87347 8.4523 -3.87347 8.4523 -4.08867C8.4523 -4.31582 8.24907 -4.31582 8.06974 -4.31582H1.02814C0.860772 -4.31582 0.645579 -4.31582 0.645579 -4.10062C0.645579 -3.87347 0.848817 -3.87347 1.02814 -3.87347H8.06974ZM8.06974 -1.64981C8.23711 -1.64981 8.4523 -1.64981 8.4523 -1.86501C8.4523 -2.09215 8.24907 -2.09215 8.06974 -2.09215H1.02814C0.860772 -2.09215 0.645579 -2.09215 0.645579 -1.87696C0.645579 -1.64981 0.848817 -1.64981 1.02814 -1.64981H8.06974Z' id='eq2-g9-61'/>
<path d='M4.69838 -7.93823C4.35168 -7.59153 4.10062 -7.35243 3.71806 -7.35243C3.53873 -7.35243 3.37136 -7.38829 3.00075 -7.63935C2.76164 -7.78281 2.52254 -7.93823 2.24757 -7.93823C1.80523 -7.93823 1.54222 -7.63935 0.980324 -7.01768L1.1477 -6.85031C1.4944 -7.19701 1.74545 -7.43611 2.12802 -7.43611C2.30735 -7.43611 2.47472 -7.40025 2.84533 -7.14919C3.08443 -7.00573 3.32354 -6.85031 3.59851 -6.85031C4.04085 -6.85031 4.30386 -7.14919 4.86575 -7.77086L4.69838 -7.93823Z' id='eq2-g9-126'/>
</defs>
<g id='eq2-page1'>
<use x='128.826' xlink:href='#eq2-g5-73' y='-40.1136'/>
<use x='132.498' xlink:href='#eq2-g4-116' y='-39.0399'/>
<use x='135.348' xlink:href='#eq2-g7-43' y='-39.0399'/>
<use x='140.938' xlink:href='#eq2-g4-116' y='-39.0399'/>
<use x='143.789' xlink:href='#eq2-g4-100' y='-36.9477'/>
<use x='128.826' xlink:href='#eq2-g5-71' y='-29.5887'/>
<use x='149.982' xlink:href='#eq2-g9-22' y='-32.8298'/>
<use x='149.124' xlink:href='#eq2-g6-113' y='-32.8298'/>
<use x='158.064' xlink:href='#eq2-g9-61' y='-32.8298'/>
<use x='170.489' xlink:href='#eq2-g2-20' y='-49.6868'/>
<use x='177.994' xlink:href='#eq2-g8-49' y='-44.2485'/>
<rect height='0.478187' width='4.23418' x='177.994' y='-42.7693'/>
<use x='177.994' xlink:href='#eq2-g8-50' y='-35.4187'/>
<use x='183.424' xlink:href='#eq2-g5-73' y='-45.4292'/>
<use x='187.096' xlink:href='#eq2-g4-116' y='-42.9204'/>
<use x='189.946' xlink:href='#eq2-g7-43' y='-42.9204'/>
<use x='195.716' xlink:href='#eq2-g7-94' y='-44.0234'/>
<use x='195.536' xlink:href='#eq2-g4-116' y='-42.9204'/>
<use x='198.387' xlink:href='#eq2-g4-100' y='-40.8282'/>
<use x='203.721' xlink:href='#eq2-g0-33' y='-39.5414'/>
<use x='212.908' xlink:href='#eq2-g9-126' y='-41.7474'/>
<use x='212.746' xlink:href='#eq2-g6-116' y='-39.5414'/>
<use x='216.973' xlink:href='#eq2-g5-100' y='-37.7481'/>
<use x='196.387' xlink:href='#eq2-g9-49' y='-25.0956'/>
<use x='221.828' xlink:href='#eq2-g2-21' y='-49.6868'/>
<use x='230.795' xlink:href='#eq2-g3-10' y='-32.8298'/>
<use x='242.75' xlink:href='#eq2-g5-73' y='-41.5487'/>
<use x='246.422' xlink:href='#eq2-g4-116' y='-39.0399'/>
<use x='249.272' xlink:href='#eq2-g7-43' y='-39.0399'/>
<use x='255.042' xlink:href='#eq2-g7-94' y='-40.1429'/>
<use x='254.862' xlink:href='#eq2-g4-116' y='-39.0399'/>
<use x='257.713' xlink:href='#eq2-g4-100' y='-36.9477'/>
<use x='242.75' xlink:href='#eq2-g5-71' y='-29.5887'/>
<use x='263.906' xlink:href='#eq2-g9-22' y='-32.8298'/>
<use x='263.047' xlink:href='#eq2-g6-113' y='-32.8298'/>
<use x='119.876' xlink:href='#eq2-g5-71' y='-11.3305'/>
<use x='126.973' xlink:href='#eq2-g1-112' y='-6.3943'/>
<use x='134.445' xlink:href='#eq2-g5-73' y='-4.60103'/>
<use x='138.117' xlink:href='#eq2-g4-116' y='-3.5273'/>
<use x='140.967' xlink:href='#eq2-g7-43' y='-3.5273'/>
<use x='146.557' xlink:href='#eq2-g4-116' y='-3.5273'/>
<use x='149.408' xlink:href='#eq2-g4-100' y='-1.43512'/>
<use x='158.064' xlink:href='#eq2-g9-61' y='-6.3943'/>
<use x='170.489' xlink:href='#eq2-g5-71' y='-11.3305'/>
<use x='177.586' xlink:href='#eq2-g1-112' y='-6.3943'/>
<use x='185.058' xlink:href='#eq2-g5-73' y='-4.60103'/>
<use x='188.729' xlink:href='#eq2-g4-116' y='-2.09218'/>
<use x='191.58' xlink:href='#eq2-g7-43' y='-2.09218'/>
<use x='197.35' xlink:href='#eq2-g7-94' y='-3.19519'/>
<use x='197.17' xlink:href='#eq2-g4-116' y='-2.09218'/>
<use x='200.02' xlink:href='#eq2-g4-100' y='0'/>
<use x='208.012' xlink:href='#eq2-g9-43' y='-6.3943'/>
<use x='219.773' xlink:href='#eq2-g5-71' y='-11.3305'/>
<use x='226.87' xlink:href='#eq2-g1-118' y='-6.3943'/>
<use x='233.968' xlink:href='#eq2-g5-73' y='-4.60103'/>
<use x='237.64' xlink:href='#eq2-g4-116' y='-2.09218'/>
<use x='240.49' xlink:href='#eq2-g7-43' y='-2.09218'/>
<use x='246.26' xlink:href='#eq2-g7-94' y='-3.19519'/>
<use x='246.081' xlink:href='#eq2-g4-116' y='-2.09218'/>
<use x='248.931' xlink:href='#eq2-g4-100' y='0'/>
<use x='254.428' xlink:href='#eq2-g9-126' y='-8.60032'/>
<use x='254.266' xlink:href='#eq2-g6-116' y='-6.3943'/>
<use x='258.493' xlink:href='#eq2-g5-100' y='-4.60103'/>
</g>
</svg></div><p>where we say that we have propagated our state up to the current estimated true imaging time for the current image, <svg class="m-math" style="width: 3.054em; height: 1.181em; vertical-align: -0.000em;" viewBox="0 -11.3341 29.3219 11.3341">
<title>
${}^{I_{t+\hat{t}_d}}\boldsymbol\omega$
</title>
<defs>
<path d='M4.32777 -1.67372C4.62665 -2.22366 4.79402 -2.80946 4.79402 -3.0127C4.79402 -3.27572 4.65056 -3.53873 4.33973 -3.53873C3.59851 -3.53873 3.51482 -2.27148 3.50286 -1.94869C3.49091 -1.76936 3.47895 -1.75741 3.467 -1.74545C3.28767 -1.56613 2.7736 -1.21943 2.13998 -1.21943C1.35093 -1.21943 0.896638 -1.7335 0.896638 -2.40299C0.896638 -2.7736 1.11183 -3.67024 1.93674 -4.79402C2.04433 -4.92553 2.06824 -4.96139 2.06824 -5.05704C2.06824 -5.2005 1.94869 -5.30809 1.81719 -5.30809C1.69763 -5.30809 1.6259 -5.23636 1.61395 -5.23636C1.55417 -5.17659 0.263014 -3.61046 0.263014 -1.90087C0.263014 -0.6934 0.872727 0.0956413 1.88892 0.0956413C2.73773 0.0956413 3.40722 -0.478207 3.67024 -0.765131C3.82565 -0.406476 4.17235 0.0956413 4.96139 0.0956413C5.98954 0.0956413 6.91009 -0.657534 7.43611 -1.47049C8.16538 -2.60623 8.27298 -4.13649 8.27298 -4.30386C8.27298 -5.22441 7.72304 -5.41569 7.47198 -5.41569C7.01768 -5.41569 6.56339 -4.93748 6.56339 -4.5071C6.56339 -4.19626 6.79054 -4.0528 6.91009 -3.95716C7.22092 -3.75392 7.48394 -3.467 7.48394 -3.08443C7.48394 -2.29539 6.45579 -1.21943 5.21245 -1.21943C4.86575 -1.21943 4.54296 -1.31507 4.32777 -1.67372Z' id='eq3-g0-33'/>
<path d='M3.0924 -4.82192C3.16413 -5.10087 3.18007 -5.18057 3.77783 -5.18057C3.96115 -5.18057 4.05679 -5.18057 4.05679 -5.332C4.05679 -5.33998 4.04882 -5.44359 3.9213 -5.44359C3.80174 -5.44359 3.55467 -5.42765 3.42715 -5.41968H2.32727C2.21569 -5.42765 1.92877 -5.44359 1.81719 -5.44359C1.78531 -5.44359 1.65778 -5.44359 1.65778 -5.29215C1.65778 -5.18057 1.75342 -5.18057 1.91283 -5.18057C2.41494 -5.18057 2.41494 -5.13275 2.41494 -5.03711C2.41494 -5.02117 2.41494 -4.98132 2.38306 -4.8538L1.32304 -0.629639C1.25131 -0.342715 1.2274 -0.263014 0.637609 -0.263014C0.446326 -0.263014 0.358655 -0.263014 0.358655 -0.111582C0.358655 -0.071731 0.390535 0 0.486177 0C0.597758 0 0.860772 -0.0159402 0.980324 -0.0239103H2.08817C2.19975 -0.0159402 2.48667 0 2.59826 0C2.64608 0 2.75766 0 2.75766 -0.151432C2.75766 -0.263014 2.66202 -0.263014 2.49465 -0.263014C2.37509 -0.263014 2.32727 -0.263014 2.19178 -0.278954S1.99253 -0.302864 1.99253 -0.390535C1.99253 -0.430386 2.0005 -0.430386 2.02441 -0.541968L3.0924 -4.82192Z' id='eq3-g2-73'/>
<path d='M3.61644 -3.96912C3.62242 -3.99303 3.63437 -4.02889 3.63437 -4.05878C3.63437 -4.15442 3.51482 -4.14844 3.44309 -4.14247L2.7736 -4.08867C2.67198 -4.08269 2.59427 -4.07671 2.59427 -3.93923C2.59427 -3.84359 2.67198 -3.84359 2.76164 -3.84359C2.94097 -3.84359 2.98281 -3.83163 3.06052 -3.80174C3.05455 -3.71208 3.05455 -3.70012 3.03661 -3.62242C2.91108 -3.10834 2.81544 -2.70785 2.69589 -2.27746C2.6122 -2.41494 2.40897 -2.63611 2.03836 -2.63611C1.27323 -2.63611 0.448319 -1.83512 0.448319 -0.956413C0.448319 -0.310834 0.902615 0.0597758 1.41071 0.0597758C1.81121 0.0597758 2.15193 -0.215193 2.30137 -0.364633C2.41494 0.0119552 2.81544 0.0597758 2.94695 0.0597758C3.16214 0.0597758 3.31756 -0.0597758 3.43113 -0.245081C3.58057 -0.484184 3.66426 -0.830884 3.66426 -0.860772C3.66426 -0.872727 3.65828 -0.944458 3.55068 -0.944458C3.46102 -0.944458 3.44907 -0.902615 3.42516 -0.806974C3.32951 -0.442341 3.20399 -0.137484 2.97086 -0.137484C2.76762 -0.137484 2.74969 -0.352677 2.74969 -0.442341C2.74969 -0.52005 2.74969 -0.537983 2.77958 -0.645579L3.61644 -3.96912ZM2.32528 -0.783064C2.29539 -0.675467 2.29539 -0.663512 2.21171 -0.573848C1.88294 -0.203238 1.57808 -0.137484 1.42864 -0.137484C1.18954 -0.137484 0.956413 -0.298879 0.956413 -0.723288C0.956413 -0.968369 1.08194 -1.55417 1.27323 -1.89489C1.45255 -2.21768 1.75741 -2.43885 2.04433 -2.43885C2.49265 -2.43885 2.60623 -1.96663 2.60623 -1.92478L2.58829 -1.8411L2.32528 -0.783064Z' id='eq3-g1-100'/>
<path d='M1.60797 -2.33724H2.25953C2.37908 -2.33724 2.46276 -2.33724 2.46276 -2.48667C2.46276 -2.57634 2.38506 -2.57634 2.27746 -2.57634H1.66775L1.87696 -3.40125C1.90087 -3.49091 1.90087 -3.52677 1.90087 -3.53275C1.90087 -3.67621 1.7873 -3.73599 1.69166 -3.73599C1.61993 -3.73599 1.46451 -3.69415 1.41071 -3.50286L1.17758 -2.57634H0.532005C0.406476 -2.57634 0.400498 -2.57036 0.376588 -2.55243C0.3467 -2.52852 0.32279 -2.45081 0.32279 -2.42092C0.340722 -2.33724 0.394521 -2.33724 0.514072 -2.33724H1.11781L0.765131 -0.926526C0.729265 -0.789041 0.681445 -0.585803 0.681445 -0.514072C0.681445 -0.167372 0.992279 0.0597758 1.35691 0.0597758C2.04433 0.0597758 2.45081 -0.759153 2.45081 -0.860772C2.45081 -0.878705 2.43885 -0.944458 2.33724 -0.944458C2.25953 -0.944458 2.24757 -0.91457 2.21768 -0.842839C2.01445 -0.394521 1.67372 -0.137484 1.38082 -0.137484C1.15965 -0.137484 1.15367 -0.358655 1.15367 -0.436364C1.15367 -0.52005 1.15367 -0.532005 1.18356 -0.645579L1.60797 -2.33724Z' id='eq3-g1-116'/>
<path d='M2.94695 -1.33898H4.87771C4.96139 -1.33898 5.11083 -1.33898 5.11083 -1.4944S4.96139 -1.64981 4.87771 -1.64981H2.94695V-3.58655C2.94695 -3.67024 2.94695 -3.81968 2.79153 -3.81968S2.63611 -3.67024 2.63611 -3.58655V-1.64981H0.705355C0.621669 -1.64981 0.472229 -1.64981 0.472229 -1.4944S0.621669 -1.33898 0.705355 -1.33898H2.63611V0.597758C2.63611 0.681445 2.63611 0.830884 2.79153 0.830884S2.94695 0.681445 2.94695 0.597758V-1.33898Z' id='eq3-g3-43'/>
<path d='M1.82316 -4.14844L0.89066 -3.35342L1.02217 -3.18007L1.82316 -3.77186L2.62416 -3.18007L2.75567 -3.35342L1.82316 -4.14844Z' id='eq3-g3-94'/>
</defs>
<g id='eq3-page1'>
<use x='0' xlink:href='#eq3-g2-73' y='-5.88786'/>
<use x='3.6717' xlink:href='#eq3-g1-116' y='-3.37901'/>
<use x='6.52211' xlink:href='#eq3-g3-43' y='-3.37901'/>
<use x='12.2921' xlink:href='#eq3-g3-94' y='-4.48202'/>
<use x='12.1122' xlink:href='#eq3-g1-116' y='-3.37901'/>
<use x='14.9626' xlink:href='#eq3-g1-100' y='-1.28683'/>
<use x='20.2974' xlink:href='#eq3-g0-33' y='0'/>
</g>
</svg> is the angular velocity at the end of propagation with biases removed. This is off by some smaller error, so to get to the true imaging time in the imu base clock, we can append some small timeoffset error. Thus the Jacobian in respect to our time offset during our cloning procedure is the following:</p><div class="m-math"><svg style="width: 9.545em; height: 6.817em;" viewBox="148.304 -65.4465 91.6361 65.4465">
<title>
\begin{align*} \frac{\partial {}^{I_{t+t_d}}_G\tilde{\boldsymbol\theta}}{\partial \tilde{t}_d} &amp;= {}^{I_{t+\hat{t}_d}}\boldsymbol\omega \\ \frac{\partial {}^G\tilde{\mathbf{p}}_{I_{t+t_d}}}{\partial \tilde{t}_d} &amp;= {}^G\mathbf{v}_{I_{t+\hat{t}_d}} \end{align*}
</title>
<defs>
<path d='M6.53948 -5.85803C6.53948 -7.96214 5.29614 -8.39253 4.56687 -8.39253C3.62242 -8.39253 2.4269 -7.77086 1.53026 -6.14496C0.920548 -5.02117 0.549938 -3.39527 0.549938 -2.4269C0.549938 -0.6934 1.45853 0.0956413 2.5345 0.0956413C3.33549 0.0956413 4.38755 -0.37061 5.21245 -1.59004C6.21669 -3.06052 6.53948 -4.96139 6.53948 -5.85803ZM2.36712 -4.43537C2.5345 -5.12877 2.84533 -6.21669 3.20399 -6.83836C3.47895 -7.32852 3.96912 -7.96214 4.54296 -7.96214C5.04508 -7.96214 5.26027 -7.43611 5.26027 -6.73076C5.26027 -5.97758 4.99726 -4.93748 4.86575 -4.43537H2.36712ZM4.72229 -3.86152C3.98107 -0.657534 2.97684 -0.334745 2.55841 -0.334745C2.39103 -0.334745 2.13998 -0.382565 1.9726 -0.753176C1.82914 -1.07597 1.82914 -1.54222 1.82914 -1.55417C1.82914 -2.23562 2.09215 -3.34745 2.22366 -3.86152H4.72229Z' id='eq4-g0-18'/>
<path d='M4.32777 -1.67372C4.62665 -2.22366 4.79402 -2.80946 4.79402 -3.0127C4.79402 -3.27572 4.65056 -3.53873 4.33973 -3.53873C3.59851 -3.53873 3.51482 -2.27148 3.50286 -1.94869C3.49091 -1.76936 3.47895 -1.75741 3.467 -1.74545C3.28767 -1.56613 2.7736 -1.21943 2.13998 -1.21943C1.35093 -1.21943 0.896638 -1.7335 0.896638 -2.40299C0.896638 -2.7736 1.11183 -3.67024 1.93674 -4.79402C2.04433 -4.92553 2.06824 -4.96139 2.06824 -5.05704C2.06824 -5.2005 1.94869 -5.30809 1.81719 -5.30809C1.69763 -5.30809 1.6259 -5.23636 1.61395 -5.23636C1.55417 -5.17659 0.263014 -3.61046 0.263014 -1.90087C0.263014 -0.6934 0.872727 0.0956413 1.88892 0.0956413C2.73773 0.0956413 3.40722 -0.478207 3.67024 -0.765131C3.82565 -0.406476 4.17235 0.0956413 4.96139 0.0956413C5.98954 0.0956413 6.91009 -0.657534 7.43611 -1.47049C8.16538 -2.60623 8.27298 -4.13649 8.27298 -4.30386C8.27298 -5.22441 7.72304 -5.41569 7.47198 -5.41569C7.01768 -5.41569 6.56339 -4.93748 6.56339 -4.5071C6.56339 -4.19626 6.79054 -4.0528 6.91009 -3.95716C7.22092 -3.75392 7.48394 -3.467 7.48394 -3.08443C7.48394 -2.29539 6.45579 -1.21943 5.21245 -1.21943C4.86575 -1.21943 4.54296 -1.31507 4.32777 -1.67372Z' id='eq4-g0-33'/>
<path d='M8.06974 -3.87347C8.23711 -3.87347 8.4523 -3.87347 8.4523 -4.08867C8.4523 -4.31582 8.24907 -4.31582 8.06974 -4.31582H1.02814C0.860772 -4.31582 0.645579 -4.31582 0.645579 -4.10062C0.645579 -3.87347 0.848817 -3.87347 1.02814 -3.87347H8.06974ZM8.06974 -1.64981C8.23711 -1.64981 8.4523 -1.64981 8.4523 -1.86501C8.4523 -2.09215 8.24907 -2.09215 8.06974 -2.09215H1.02814C0.860772 -2.09215 0.645579 -2.09215 0.645579 -1.87696C0.645579 -1.64981 0.848817 -1.64981 1.02814 -1.64981H8.06974Z' id='eq4-g6-61'/>
<path d='M4.69838 -7.93823C4.35168 -7.59153 4.10062 -7.35243 3.71806 -7.35243C3.53873 -7.35243 3.37136 -7.38829 3.00075 -7.63935C2.76164 -7.78281 2.52254 -7.93823 2.24757 -7.93823C1.80523 -7.93823 1.54222 -7.63935 0.980324 -7.01768L1.1477 -6.85031C1.4944 -7.19701 1.74545 -7.43611 2.12802 -7.43611C2.30735 -7.43611 2.47472 -7.40025 2.84533 -7.14919C3.08443 -7.00573 3.32354 -6.85031 3.59851 -6.85031C4.04085 -6.85031 4.30386 -7.14919 4.86575 -7.77086L4.69838 -7.93823Z' id='eq4-g6-126'/>
<path d='M3.37136 1.80523H2.54645V-0.490162C2.84533 -0.227148 3.37136 0.071731 4.08867 0.071731C5.72653 0.071731 7.00573 -0.920548 7.00573 -2.666C7.00573 -4.31582 5.8939 -5.37983 4.27995 -5.37983C3.5746 -5.37983 2.96488 -5.14072 2.48667 -4.75816V-5.37983L0.418431 -5.28418V-4.77011C1.15965 -4.77011 1.24334 -4.77011 1.24334 -4.30386V1.80523H0.418431V2.3193C0.6934 2.29539 1.55417 2.29539 1.88892 2.29539S3.09639 2.29539 3.37136 2.3193V1.80523ZM2.54645 -4.18431C2.98879 -4.75816 3.62242 -4.94944 4.08867 -4.94944C4.86575 -4.94944 5.57111 -4.24408 5.57111 -2.666C5.57111 -0.932503 4.71034 -0.32279 3.94521 -0.32279C3.43113 -0.32279 2.91706 -0.585803 2.54645 -1.1477V-4.18431Z' id='eq4-g1-112'/>
<path d='M5.91781 -4.51905C6.00149 -4.69838 6.04932 -4.79402 6.80249 -4.79402V-5.30809C6.3721 -5.28418 6.34819 -5.28418 5.85803 -5.28418C5.53524 -5.28418 5.51133 -5.28418 4.82989 -5.30809V-4.79402C5.15268 -4.79402 5.41569 -4.73425 5.41569 -4.65056C5.41569 -4.63861 5.41569 -4.62665 5.35592 -4.5071L3.95716 -1.43462L2.41494 -4.79402H3.07248V-5.30809C2.79751 -5.28418 1.96065 -5.28418 1.63786 -5.28418C1.29116 -5.28418 0.597758 -5.28418 0.286924 -5.30809V-4.79402H1.0401L3.14421 -0.227148C3.25181 0 3.27572 0.0597758 3.55068 0.0597758C3.74197 0.0597758 3.83761 0.0358655 3.94521 -0.203238L5.91781 -4.51905Z' id='eq4-g1-118'/>
<path d='M3.61644 -3.96912C3.62242 -3.99303 3.63437 -4.02889 3.63437 -4.05878C3.63437 -4.15442 3.51482 -4.14844 3.44309 -4.14247L2.7736 -4.08867C2.67198 -4.08269 2.59427 -4.07671 2.59427 -3.93923C2.59427 -3.84359 2.67198 -3.84359 2.76164 -3.84359C2.94097 -3.84359 2.98281 -3.83163 3.06052 -3.80174C3.05455 -3.71208 3.05455 -3.70012 3.03661 -3.62242C2.91108 -3.10834 2.81544 -2.70785 2.69589 -2.27746C2.6122 -2.41494 2.40897 -2.63611 2.03836 -2.63611C1.27323 -2.63611 0.448319 -1.83512 0.448319 -0.956413C0.448319 -0.310834 0.902615 0.0597758 1.41071 0.0597758C1.81121 0.0597758 2.15193 -0.215193 2.30137 -0.364633C2.41494 0.0119552 2.81544 0.0597758 2.94695 0.0597758C3.16214 0.0597758 3.31756 -0.0597758 3.43113 -0.245081C3.58057 -0.484184 3.66426 -0.830884 3.66426 -0.860772C3.66426 -0.872727 3.65828 -0.944458 3.55068 -0.944458C3.46102 -0.944458 3.44907 -0.902615 3.42516 -0.806974C3.32951 -0.442341 3.20399 -0.137484 2.97086 -0.137484C2.76762 -0.137484 2.74969 -0.352677 2.74969 -0.442341C2.74969 -0.52005 2.74969 -0.537983 2.77958 -0.645579L3.61644 -3.96912ZM2.32528 -0.783064C2.29539 -0.675467 2.29539 -0.663512 2.21171 -0.573848C1.88294 -0.203238 1.57808 -0.137484 1.42864 -0.137484C1.18954 -0.137484 0.956413 -0.298879 0.956413 -0.723288C0.956413 -0.968369 1.08194 -1.55417 1.27323 -1.89489C1.45255 -2.21768 1.75741 -2.43885 2.04433 -2.43885C2.49265 -2.43885 2.60623 -1.96663 2.60623 -1.92478L2.58829 -1.8411L2.32528 -0.783064Z' id='eq4-g2-100'/>
<path d='M1.60797 -2.33724H2.25953C2.37908 -2.33724 2.46276 -2.33724 2.46276 -2.48667C2.46276 -2.57634 2.38506 -2.57634 2.27746 -2.57634H1.66775L1.87696 -3.40125C1.90087 -3.49091 1.90087 -3.52677 1.90087 -3.53275C1.90087 -3.67621 1.7873 -3.73599 1.69166 -3.73599C1.61993 -3.73599 1.46451 -3.69415 1.41071 -3.50286L1.17758 -2.57634H0.532005C0.406476 -2.57634 0.400498 -2.57036 0.376588 -2.55243C0.3467 -2.52852 0.32279 -2.45081 0.32279 -2.42092C0.340722 -2.33724 0.394521 -2.33724 0.514072 -2.33724H1.11781L0.765131 -0.926526C0.729265 -0.789041 0.681445 -0.585803 0.681445 -0.514072C0.681445 -0.167372 0.992279 0.0597758 1.35691 0.0597758C2.04433 0.0597758 2.45081 -0.759153 2.45081 -0.860772C2.45081 -0.878705 2.43885 -0.944458 2.33724 -0.944458C2.25953 -0.944458 2.24757 -0.91457 2.21768 -0.842839C2.01445 -0.394521 1.67372 -0.137484 1.38082 -0.137484C1.15965 -0.137484 1.15367 -0.358655 1.15367 -0.436364C1.15367 -0.52005 1.15367 -0.532005 1.18356 -0.645579L1.60797 -2.33724Z' id='eq4-g2-116'/>
<path d='M5.42765 -3.99303C5.35592 -4.66252 4.93748 -5.46351 3.86152 -5.46351C2.17584 -5.46351 0.454296 -3.75392 0.454296 -1.85305C0.454296 -1.12379 0.956413 0.251059 2.58232 0.251059C5.40374 0.251059 6.61121 -3.86152 6.61121 -5.49938C6.61121 -7.22092 5.64284 -8.54795 4.11258 -8.54795C2.37908 -8.54795 1.86501 -7.02964 1.86501 -6.70685C1.86501 -6.59925 1.93674 -6.33624 2.27148 -6.33624C2.68991 -6.33624 2.86924 -6.7188 2.86924 -6.92204C2.86924 -7.29265 2.49863 -7.29265 2.34321 -7.29265C2.83337 -8.17733 3.74197 -8.26102 4.06476 -8.26102C5.11681 -8.26102 5.7863 -7.42416 5.7863 -6.08518C5.7863 -5.32005 5.55915 -4.43537 5.4396 -3.99303H5.42765ZM2.61818 -0.071731C1.4944 -0.071731 1.30311 -0.956413 1.30311 -1.45853C1.30311 -1.98456 1.63786 -3.21594 1.81719 -3.65828C1.9726 -4.01694 2.65405 -5.22441 3.89738 -5.22441C4.98531 -5.22441 5.23636 -4.27995 5.23636 -3.63437C5.23636 -2.74969 4.45928 -0.071731 2.61818 -0.071731Z' id='eq4-g4-64'/>
<path d='M2.40299 -4.80598H3.50286C3.73001 -4.80598 3.84956 -4.80598 3.84956 -5.02117C3.84956 -5.15268 3.77783 -5.15268 3.53873 -5.15268H2.48667L2.92902 -6.89813C2.97684 -7.0655 2.97684 -7.08941 2.97684 -7.1731C2.97684 -7.36438 2.82142 -7.47198 2.666 -7.47198C2.57036 -7.47198 2.29539 -7.43611 2.19975 -7.05355L1.7335 -5.15268H0.609714C0.37061 -5.15268 0.263014 -5.15268 0.263014 -4.92553C0.263014 -4.80598 0.3467 -4.80598 0.573848 -4.80598H1.63786L0.848817 -1.64981C0.753176 -1.23138 0.71731 -1.11183 0.71731 -0.956413C0.71731 -0.394521 1.11183 0.119552 1.78132 0.119552C2.98879 0.119552 3.63437 -1.6259 3.63437 -1.70959C3.63437 -1.78132 3.58655 -1.81719 3.51482 -1.81719C3.49091 -1.81719 3.44309 -1.81719 3.41918 -1.76936C3.40722 -1.75741 3.39527 -1.74545 3.31158 -1.55417C3.06052 -0.956413 2.51059 -0.119552 1.81719 -0.119552C1.45853 -0.119552 1.43462 -0.418431 1.43462 -0.681445C1.43462 -0.6934 1.43462 -0.920548 1.47049 -1.06401L2.40299 -4.80598Z' id='eq4-g4-116'/>
<path d='M6.35218 -5.39577C6.36015 -5.42765 6.37609 -5.47547 6.37609 -5.51532C6.37609 -5.57111 6.32827 -5.61096 6.27248 -5.61096S6.19278 -5.58705 6.12902 -5.51532L5.57111 -4.90162C5.20448 -5.41171 4.68643 -5.61096 4.14446 -5.61096C2.27945 -5.61096 0.422416 -3.88941 0.422416 -2.06426C0.422416 -0.73325 1.41071 0.167372 2.76563 0.167372C3.6264 0.167372 4.26401 -0.143462 4.5589 -0.486177C4.65455 -0.231133 4.84583 -0.00797011 4.92553 -0.00797011C4.95741 -0.00797011 4.99726 -0.0239103 5.0132 -0.0557908C5.06102 -0.191283 5.2523 -1.00423 5.30809 -1.2274C5.37983 -1.5462 5.43562 -1.76936 5.48344 -1.83313C5.55517 -1.92877 5.7066 -1.93674 5.9457 -1.93674C5.98555 -1.93674 6.10511 -1.93674 6.10511 -2.0802C6.10511 -2.1599 6.04932 -2.19975 5.98555 -2.19975C5.92976 -2.19975 5.83412 -2.17584 5.06102 -2.17584C4.86177 -2.17584 4.59078 -2.17584 4.47123 -2.18381S4.03288 -2.19975 3.91333 -2.19975C3.8655 -2.19975 3.74595 -2.19975 3.74595 -2.04832C3.74595 -1.93674 3.83362 -1.93674 4.04085 -1.93674C4.20822 -1.93674 4.51108 -1.93674 4.70237 -1.86501C4.71034 -1.84907 4.71831 -1.80125 4.71831 -1.76936C4.71831 -1.72951 4.67049 -1.55417 4.64658 -1.45056C4.59875 -1.24334 4.51108 -0.908593 4.4792 -0.828892C4.22416 -0.294894 3.45106 -0.0956413 2.90112 -0.0956413C2.11208 -0.0956413 1.18755 -0.510087 1.18755 -1.80922C1.18755 -2.47073 1.45853 -3.61843 2.1599 -4.38356C2.92503 -5.21245 3.7858 -5.34795 4.20025 -5.34795C5.1726 -5.34795 5.61893 -4.58281 5.61893 -3.77783C5.61893 -3.66625 5.58705 -3.52279 5.58705 -3.42715C5.58705 -3.32354 5.69066 -3.32354 5.72254 -3.32354C5.82615 -3.32354 5.84209 -3.35542 5.87397 -3.49888L6.35218 -5.39577Z' id='eq4-g3-71'/>
<path d='M3.0924 -4.82192C3.16413 -5.10087 3.18007 -5.18057 3.77783 -5.18057C3.96115 -5.18057 4.05679 -5.18057 4.05679 -5.332C4.05679 -5.33998 4.04882 -5.44359 3.9213 -5.44359C3.80174 -5.44359 3.55467 -5.42765 3.42715 -5.41968H2.32727C2.21569 -5.42765 1.92877 -5.44359 1.81719 -5.44359C1.78531 -5.44359 1.65778 -5.44359 1.65778 -5.29215C1.65778 -5.18057 1.75342 -5.18057 1.91283 -5.18057C2.41494 -5.18057 2.41494 -5.13275 2.41494 -5.03711C2.41494 -5.02117 2.41494 -4.98132 2.38306 -4.8538L1.32304 -0.629639C1.25131 -0.342715 1.2274 -0.263014 0.637609 -0.263014C0.446326 -0.263014 0.358655 -0.263014 0.358655 -0.111582C0.358655 -0.071731 0.390535 0 0.486177 0C0.597758 0 0.860772 -0.0159402 0.980324 -0.0239103H2.08817C2.19975 -0.0159402 2.48667 0 2.59826 0C2.64608 0 2.75766 0 2.75766 -0.151432C2.75766 -0.263014 2.66202 -0.263014 2.49465 -0.263014C2.37509 -0.263014 2.32727 -0.263014 2.19178 -0.278954S1.99253 -0.302864 1.99253 -0.390535C1.99253 -0.430386 2.0005 -0.430386 2.02441 -0.541968L3.0924 -4.82192Z' id='eq4-g3-73'/>
<path d='M4.28792 -5.29215C4.29589 -5.30809 4.3198 -5.41171 4.3198 -5.41968C4.3198 -5.45953 4.28792 -5.53126 4.19228 -5.53126C4.1604 -5.53126 3.91333 -5.50735 3.73001 -5.49141L3.28369 -5.45953C3.10834 -5.44359 3.02864 -5.43562 3.02864 -5.29215C3.02864 -5.18057 3.14022 -5.18057 3.23587 -5.18057C3.61843 -5.18057 3.61843 -5.13275 3.61843 -5.06102C3.61843 -5.0132 3.55467 -4.75019 3.51482 -4.59078L3.12428 -3.03661C3.05255 -3.1721 2.82142 -3.51482 2.33524 -3.51482C1.3868 -3.51482 0.342715 -2.40697 0.342715 -1.2274C0.342715 -0.398506 0.876712 0.0797011 1.49041 0.0797011C2.0005 0.0797011 2.43885 -0.326775 2.58232 -0.486177C2.72578 0.0637609 3.26775 0.0797011 3.36339 0.0797011C3.73001 0.0797011 3.91333 -0.223163 3.97709 -0.358655C4.13649 -0.645579 4.24807 -1.10785 4.24807 -1.13973C4.24807 -1.18755 4.21619 -1.24334 4.12055 -1.24334S4.00897 -1.19552 3.96115 -0.996264C3.84956 -0.557908 3.69813 -0.143462 3.3873 -0.143462C3.20399 -0.143462 3.13225 -0.294894 3.13225 -0.518057C3.13225 -0.669489 3.15616 -0.757161 3.18007 -0.860772L4.28792 -5.29215ZM2.58232 -0.860772C2.18381 -0.310834 1.76936 -0.143462 1.51432 -0.143462C1.1477 -0.143462 0.964384 -0.478207 0.964384 -0.892653C0.964384 -1.26725 1.17958 -2.12005 1.35492 -2.47073C1.58605 -2.95691 1.97659 -3.29166 2.34321 -3.29166C2.86127 -3.29166 3.0127 -2.70984 3.0127 -2.6142C3.0127 -2.58232 2.81345 -1.80125 2.76563 -1.59402C2.66202 -1.21943 2.66202 -1.20349 2.58232 -0.860772Z' id='eq4-g3-100'/>
<path d='M2.94695 -1.33898H4.87771C4.96139 -1.33898 5.11083 -1.33898 5.11083 -1.4944S4.96139 -1.64981 4.87771 -1.64981H2.94695V-3.58655C2.94695 -3.67024 2.94695 -3.81968 2.79153 -3.81968S2.63611 -3.67024 2.63611 -3.58655V-1.64981H0.705355C0.621669 -1.64981 0.472229 -1.64981 0.472229 -1.4944S0.621669 -1.33898 0.705355 -1.33898H2.63611V0.597758C2.63611 0.681445 2.63611 0.830884 2.79153 0.830884S2.94695 0.681445 2.94695 0.597758V-1.33898Z' id='eq4-g5-43'/>
<path d='M1.82316 -4.14844L0.89066 -3.35342L1.02217 -3.18007L1.82316 -3.77186L2.62416 -3.18007L2.75567 -3.35342L1.82316 -4.14844Z' id='eq4-g5-94'/>
</defs>
<g id='eq4-page1'>
<use x='155.774' xlink:href='#eq4-g4-64' y='-52.7165'/>
<use x='162.604' xlink:href='#eq4-g3-73' y='-60.0003'/>
<use x='166.276' xlink:href='#eq4-g2-116' y='-58.9266'/>
<use x='169.126' xlink:href='#eq4-g5-43' y='-58.9266'/>
<use x='174.717' xlink:href='#eq4-g2-116' y='-58.9266'/>
<use x='177.567' xlink:href='#eq4-g2-100' y='-56.8344'/>
<use x='162.604' xlink:href='#eq4-g3-71' y='-49.4754'/>
<use x='183.524' xlink:href='#eq4-g6-126' y='-55.8713'/>
<use x='182.902' xlink:href='#eq4-g0-18' y='-52.7165'/>
<rect height='0.478187' width='34.2256' x='155.774' y='-47.8566'/>
<use x='164.931' xlink:href='#eq4-g4-64' y='-35.8033'/>
<use x='171.923' xlink:href='#eq4-g6-126' y='-38.0093'/>
<use x='171.761' xlink:href='#eq4-g4-116' y='-35.8033'/>
<use x='175.988' xlink:href='#eq4-g3-100' y='-34.0101'/>
<use x='194.516' xlink:href='#eq4-g6-61' y='-44.6288'/>
<use x='206.942' xlink:href='#eq4-g3-73' y='-50.5166'/>
<use x='210.614' xlink:href='#eq4-g2-116' y='-48.0078'/>
<use x='213.464' xlink:href='#eq4-g5-43' y='-48.0078'/>
<use x='219.234' xlink:href='#eq4-g5-94' y='-49.1108'/>
<use x='219.054' xlink:href='#eq4-g2-116' y='-48.0078'/>
<use x='221.904' xlink:href='#eq4-g2-100' y='-45.9156'/>
<use x='227.239' xlink:href='#eq4-g0-33' y='-44.6288'/>
<use x='148.304' xlink:href='#eq4-g4-64' y='-20.2403'/>
<use x='155.134' xlink:href='#eq4-g3-71' y='-24.5788'/>
<use x='163.04' xlink:href='#eq4-g6-126' y='-20.4063'/>
<use x='162.231' xlink:href='#eq4-g1-112' y='-20.2403'/>
<use x='169.703' xlink:href='#eq4-g3-73' y='-18.4471'/>
<use x='173.374' xlink:href='#eq4-g2-116' y='-17.3733'/>
<use x='176.225' xlink:href='#eq4-g5-43' y='-17.3733'/>
<use x='181.815' xlink:href='#eq4-g2-116' y='-17.3733'/>
<use x='184.665' xlink:href='#eq4-g2-100' y='-15.2812'/>
<rect height='0.478187' width='41.6961' x='148.304' y='-13.8466'/>
<use x='161.196' xlink:href='#eq4-g4-64' y='-1.79326'/>
<use x='168.188' xlink:href='#eq4-g6-126' y='-3.99928'/>
<use x='168.026' xlink:href='#eq4-g4-116' y='-1.79326'/>
<use x='172.253' xlink:href='#eq4-g3-100' y='0'/>
<use x='194.516' xlink:href='#eq4-g6-61' y='-10.6187'/>
<use x='206.942' xlink:href='#eq4-g3-71' y='-15.5549'/>
<use x='214.039' xlink:href='#eq4-g1-118' y='-10.6187'/>
<use x='221.137' xlink:href='#eq4-g3-73' y='-8.82544'/>
<use x='224.809' xlink:href='#eq4-g2-116' y='-6.31658'/>
<use x='227.659' xlink:href='#eq4-g5-43' y='-6.31658'/>
<use x='233.429' xlink:href='#eq4-g5-94' y='-7.41959'/>
<use x='233.249' xlink:href='#eq4-g2-116' y='-6.31658'/>
<use x='236.1' xlink:href='#eq4-g2-100' y='-4.22441'/>
</g>
</svg></div>
          </div></section>
          <section class="m-doc-details" id="ad28c48f76c61a6497b2f860510493e13"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ad28c48f76c61a6497b2f860510493e13" class="m-doc-self">marginalize_old_clone</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state)</span></span>
            </h3>
            <p>Remove the oldest clone, if we have more then the max clone count!!</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
              </tbody>
            </table>
<p>This will marginalize the clone from our covariance, and remove it from our state. This is mainly a helper function that we can call after each update. It will marginalize the clone specified by <a href="classov__msckf_1_1State.html#a36420e71ffa54625667eac2a8a345582" class="m-doc">State::<wbr />margtimestep()</a> which should return a clone timestamp.</p>
          </div></section>
          <section class="m-doc-details" id="a98fd90e4994d2b17089648fd79bc57b5"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static void ov_msckf::<wbr />StateHelper::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a98fd90e4994d2b17089648fd79bc57b5" class="m-doc-self">marginalize_slam</a>(</span><span class="m-doc-wrap">std::shared_ptr&lt;<a href="classov__msckf_1_1State.html" class="m-doc">State</a>&gt; state)</span></span>
            </h3>
            <p>Marginalize bad SLAM features.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state</td>
                  <td>Pointer to state</td>
                </tr>
              </tbody>
            </table>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v1.js"></script>
<script src="searchdata-v1.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Generated by <a href="https://doxygen.org/">Doxygen</a> 1.8.16 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
